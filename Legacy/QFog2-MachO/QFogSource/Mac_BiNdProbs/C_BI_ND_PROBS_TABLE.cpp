#include "C_BI_ND_PROBS_TABLE.h"#include "QB_NET.h"#include "BI_NODE.h"#include "STRINGY.h"#include "StCPTstate.h"#pragma mark --creation/destruction--//******************************************C_BI_ND_PROBS_TABLE::C_BI_ND_PROBS_TABLE(LStream  *		inStream)	//in	:LTableView(inStream){}//******************************************C_BI_ND_PROBS_TABLE::C_BI_ND_PROBS_TABLE(){}//******************************************C_BI_ND_PROBS_TABLE::~C_BI_ND_PROBS_TABLE(){}#pragma mark --about one cell--//******************************************BOOLEAN		C_BI_ND_PROBS_TABLE::get_touched_cell(STableCell  &  t_cell)	//out{	FocusDraw();		Point	local_coords;	::GetMouse( &local_coords );			SPoint32		image_coords;	LocalToImagePoint(local_coords, image_coords);	return GetCellHitBy(image_coords, t_cell) && ImagePointIsInFrame(image_coords.h, image_coords.v);}//******************************************VOID	C_BI_ND_PROBS_TABLE::DrawCell(const STableCell  &  inCell,		//inconst Rect  &  inLocalRect)			//in{//drawer	StCPTstate	saved_st(true, false, true);	saved_st.Normalize();		::TextFont(systemFont);	::MoveTo(inLocalRect.left + 2, inLocalRect.bottom - 4);	LStr255		str;	USHORT 		nd1_st = inCell.row -1 ;	USHORT	 	nd2_st = inCell.col -1 ;	DOUBLE		num = its_net_p->get_bi_nd_ptr(its_bi_nd_id)->get_cum_prob(nd1_st, nd2_st);	str.Assign(num, FIXEDDECIMAL, 6);		::DrawString(str);			draw_cell_frame(inLocalRect);//see GLOBAL_FUN.h	}#pragma mark --about many cells--//******************************************VOID	C_BI_ND_PROBS_TABLE::set_bi_nd_always(USHORT new_id)		//in{	its_bi_nd_id =new_id;	UInt32  num_of_rows, num_of_cols;	GetTableSize(num_of_rows, num_of_cols);		if(num_of_rows != 0){		RemoveRows(			num_of_rows, //how many			1, //starting with row			true);//refresh	}	if(num_of_cols != 0){		RemoveCols(			num_of_cols, //how many			1, //starting with col			true);//refresh	}	USHORT  nd1, nd2;	its_net_p->get_bi_nd(new_id, nd1, nd2);		num_of_rows = its_net_p->get_nd_ptr(nd1)->get_degen();	num_of_cols = its_net_p->get_nd_ptr(nd2)->get_degen();		InsertRows(		num_of_rows,//how many		0, //after which row		0, //data pointer		0, //data size 		true); //refresh	InsertCols(		num_of_cols,//how many		0, //after which row		0, //data pointer		0, //data size 		true); //refresh				Refresh();}